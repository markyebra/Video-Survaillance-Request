<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Video Surveillance Request</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<div class="banner">
  Video Surveillance Request
</div>

<div class="main">
  <div class="form-box">

    <form id="myForm">

      <!-- Employee Info -->
      <label for="employeeId">Employee ID</label>
      <input type="text" id="employeeId" required>

      <label for="lastName">Last Name</label>
      <input type="text" id="lastName" required>

      <label for="firstName">First Name</label>
      <input type="text" id="firstName" required>

      <label for="email">Employee Email</label>
      <input type="email" id="email" required>

      <!-- Job Info -->
      <label for="department">Department</label>
      <select id="department" required>
        <option value="">Select Department</option>
        <option>IT</option>
        <option>Security</option>
        <option>Human Resources</option>
        <option>Operations</option>
      </select>

      <label for="division">Division</label>
      <select id="division" required>
        <option value="">Select Division</option>
        <option>Corporate</option>
        <option>Field</option>
        <option>Administration</option>
      </select>

      <label for="jobTitle">Job Title</label>
      <input type="text" id="jobTitle" required>

      <!-- Camera Info -->
      <label for="buildingName">Building of Camera Requested</label>
      <input type="text" id="buildingName" required>

      <label for="cameraNumber">Camera Number</label>
      <input type="text" id="cameraNumber" required>

      <!-- Time Info -->
      <label for="startTime">Footage Start Time</label>
      <input type="datetime-local" id="startTime" required>

      <label for="endTime">Footage End Time</label>
      <input type="datetime-local" id="endTime" required>

      <!-- Reason -->
      <label for="reason">Reason for Requesting Footage</label>
      <textarea id="reason" rows="4" required></textarea>

      <button type="submit">Send Request</button>

    </form>
  </div>
</div>

<script>
  const form = document.getElementById("myForm");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    let data = {
      employeeId: document.getElementById("employeeId").value,
      lastName: document.getElementById("lastName").value,
      firstName: document.getElementById("firstName").value,
      email: document.getElementById("email").value,
      department: document.getElementById("department").value,
      division: document.getElementById("division").value,
      jobTitle: document.getElementById("jobTitle").value,
      buildingName: document.getElementById("buildingName").value,
      cameraNumber: document.getElementById("cameraNumber").value,
      startTime: document.getElementById("startTime").value,
      endTime: document.getElementById("endTime").value,
      reason: document.getElementById("reason").value
    };

    let response = await fetch("http://127.0.0.1:5000/submit", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    });

    let result = await response.json();

    if (response.ok) {
      showConfirmation();
    }
  });

  function showConfirmation() {
    document.body.innerHTML = `
      <div style="
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-color: #f4f4f4;
        font-family: Arial, sans-serif;
      ">
        <div style="
          background: white;
          padding: 40px;
          border-radius: 8px;
          box-shadow: 0 4px 12px rgba(0,0,0,0.1);
          text-align: center;
        ">
          <h2>Request Submitted</h2>
          <p>Approval updates will be sent to your email.</p>
          <button onclick="location.reload()" style="
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
          ">
            Make a New Request
          </button>
        </div>
      </div>
    `;
  }
</script>

</body>
</html>
